<!doctype html>
<html lang="en">
  <head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <meta name="generator" content="Hugo 0.54.0" />                                                                   
               
    
  <title>ANT 6973, Spring 2019</title>
	<link rel="apple-touch-icon" sizes="76x76" href="img/apple-icon.png">
	<link rel="icon" type="image/png" href="../../img/favicon.png">
	
	
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
	
  <link rel="stylesheet" href="https://cdn.rawgit.com/gaborcsardi/r-font/master/rlogo.css">
  <link rel="stylesheet" href="https://cdn.rawgit.com/wesbos/Font-Awesome-Docker-Icon/master/fontcustom/fontcustom.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.0/css/academicons.min.css">

	
  <link href="../../css/bootstrap.min.css" rel="stylesheet" />
  <link href="../../css/material-kit.css" rel="stylesheet"/>
  
  

  
    
  <link rel="alternate" href="../../index.xml" type="application/rss+xml" title="ANT 6973, Spring 2019">
  <link rel="feed" href="../../index.xml" type="application/rss+xml" title="ANT 6973, Spring 2019">
  <link rel="canonical" href="../../assignments/viz-challenges/">
</head>

  
<body class="profile-page">
  	<nav class="navbar navbar-transparent navbar-fixed-top navbar-color-on-scroll">
	    	<div class="container">
        	
        	<div class="navbar-header">
        		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example">
            		<span class="sr-only">Toggle navigation</span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
        		</button>
        		<a class="navbar-brand" href="../../">ANT 6973, Spring 2019</a>
        	</div>

        	<div class="collapse navbar-collapse" id="navigation-example">
        		<ul class="nav navbar-nav navbar-right">
      
        

        <li class="nav-item">
          <a href="../../">
            <i class='sidebar-button-icon fa fa-lg fa-home'></i>
            <span>Home</span>
          </a>
        </li>
        
      
        

        <li class="nav-item">
          <a href="../../datacamp">
            <i class='material-icons'>dvr</i>
            <span>DataCamp</span>
          </a>
        </li>
        
      
        

        <li class="nav-item">
          <a href="../../cheatsheets">
            <i class='material-icons'>build</i>
            <span>Cheat Sheets</span>
          </a>
        </li>
        
      
        

        <li class="nav-item">
          <a href="../../schedule">
            <i class='material-icons'>date_range</i>
            <span>Schedule</span>
          </a>
        </li>
        
      
        

        <li class="nav-item">
          <a href="../../policies">
            <i class='material-icons'>gavel</i>
            <span>Policies</span>
          </a>
        </li>
        
      
        		</ul>
        	</div>
    	</div>
    </nav>
  <div class="wrapper">
    <div class="header header-filter" style="background-image: url('/img/mugesketch.png');">
    </div>
		<div class="main main-raised">
			<div class="container">
		  	<div class="section text-left">
		  	  <h2 class="title text-center">Visualization Challenges</h2>
	            

<p><br></p>

<h3 id="catch-up-work">Catch-up work</h3>

<ul>
<li><strong>Work on Small Project 2!</strong></li>

<li><p>Get caught up will any other assignments that you haven&rsquo;t completed. This includes:</p>

<ul>
<li>9 DataCamp chapters.</li>
<li><code>msleep</code></li>
<li><code>pies</code></li>
<li><code>baboon-activities</code></li>
<li><code>babynames</code></li>
<li><code>maps</code></li>
<li><code>ozone</code></li>
<li><code>spreadsheets</code></li>
<li><code>tidy-data</code></li>
<li><code>data-manip1</code></li>
</ul></li>
</ul>

<p><br></p>

<p><strong>If you&rsquo;re all caught up,</strong> practice your data manipulation and plotting skills by working on the two small challenges below. I&rsquo;ll post solutions after class is over.</p>

<p><br>
<hr>
<br></p>

<h4 id="1-sex-differences-in-mortality-over-time-in-western-europe">1. Sex differences in mortality over time in Western Europe</h4>

<p><strong>Data:</strong></p>

<p>Source: <a href="https://www.mortality.org">The Human Mortality Database</a>.</p>

<ul>
<li><a href="../../livecode/viz-challenges/England_Mx_1x1.txt"><i class="fas fa-file-alt fa-lg"></i> England_Mx_1x1.txt</a> (death rates by age and year for England and Wales)</li>
<li><a href="../../livecode/viz-challenges/France_Mx_1x1.txt"><i class="fas fa-file-alt fa-lg"></i> France_Mx_1x1.txt</a> (death rates by age and year for France)</li>
</ul>

<p><br></p>

<p><strong>Instructions:</strong></p>

<ol>
<li>Download the <code>.txt</code> files above.</li>
<li>Try to create something similar to this plot:</li>
</ol>

<p><img src="../../livecode/viz-challenges/mortality.svg" alt="" /></p>

<p><strong>Hints for data manipulation:</strong></p>

<ol>
<li>Check to see how the columns are delimited in the text files. Each line is the same length, and each field is in the same position in every line. Use a <code>readr</code> function to read white-space-deparated columns that are formatted like this.</li>
<li>Inspect the data in the text files carefully. There are a couple of problems with the data structure that will need to be addressed when you import the files.</li>
<li>The two files can be &ldquo;bound&rdquo; together row-wise using the <code>dplyr</code> function <code>bind_rows()</code>. Before binding, what do you need to add to each country&rsquo;s data file?</li>
<li>Notice in the data how people &gt;= 110 years old are coded, and why this is a problem. Since we want to treat age as a number, recode all such people to be 110 years old, and convert the column to a number.</li>
<li>You can create a new column with percentile bins using the <code>dplyr</code> function <code>ntile()</code>. When doinng so, create 100 bins.</li>
</ol>

<p><strong>Hints for plotting:</strong></p>

<ol>
<li>Filter out any people older than age 100 (there are some weird things going on above that age due to small sample sizes).</li>
<li>Use <code>geom_raster()</code>, which is like <code>geom_tile()</code> but is more effective at creating a &ldquo;blended&rdquo; effect when you have a large number of tiles.</li>
<li>Facet by two variables (what are they?) using <code>facet_grid()</code>.</li>
<li>Use a sequential color palette. I used the <code>viridis</code> palette called &ldquo;magma&rdquo;.

<ul>
<li>By default, a color bar will be created. Change this to a discrete legend by adding this line to your plot: <code>guides(fill = guide_legend())</code>. Additional options can be provided to <code>guide_legend()</code> to set the number of legend rows and to position the title and labels.</li>
<li>In your <code>scale_fill_</code> function, manually set the color breaks using <code>breaks = &lt;your sequence of breaks here&gt;</code>.</li>
</ul></li>
</ol>

<p><strong>What interesting things does this visualization reveal about mortality patterns in these countries?</strong></p>

<p><br>
<hr>
<br></p>

<h4 id="monthly-temperature-anomalies-in-san-antonio">Monthly temperature anomalies in San Antonio</h4>

<p><strong>Data:</strong></p>

<ul>
<li><a href="../../livecode/viz-challenges/England_Mx_1x1.txt"><i class="fas fa-file-csv fa-lg"></i> sat_weather.csv</a> (Daily temperature summaries from SAT)</li>
</ul>

<p>Source: <a href="https://www.ncdc.noaa.gov/ghcnd-data-access">Global Historical Climatology Network Daily</a>.</p>

<p><br></p>

<p><strong>Instructions:</strong></p>

<ol>
<li>Download the <code>.csv</code> file above.</li>
<li>Try to create something similar to this plot:</li>
</ol>

<p><img src="../../livecode/viz-challenges/sat_t_anom.svg" alt="" /></p>

<p><strong>Hints for data manipulation:</strong></p>

<ol>
<li>Some rows have <code>tmax</code> and <code>tmin</code> but are missing <code>tavg</code>, while a few rows have <code>tavg</code> but no <code>tmax</code> or <code>tmin</code>. We cannot recover <code>tmax</code> and <code>tmin</code> when they are missing, but we can approximate any missing <code>tavg</code> values by taking the average of <code>tmax</code> and <code>tmin</code> for that day. Then we need to &ldquo;coalesce&rdquo; the two different kinds of <code>tavg</code> measurements: use the recorded <code>tavg</code> if present, otherwise use the approximated one. There&rsquo;s a nice function called <code>coalesce()</code> that will accomplish this for us. Given a set of vectors, it takes the first non-missing value at each position. Use it like this: <code>mutate(tavg = coalesce(tavg, tavg_approx))</code>.</li>
<li>You will need to summarize multiple variables (by which groups?) and reshape.</li>
<li>You can use a grouped mutate to calculate the anomalies.</li>
</ol>

<p><strong>Hints for plotting:</strong></p>

<ol>
<li>Use <code>geom_tile()</code>.</li>
<li>Facet by the temperature variables using <code>facet_wrap()</code>.</li>
<li>Use a diverging color palette centered at zero. I used the <code>RColorBrewer</code> palette called &ldquo;RdBu&rdquo;.</li>
<li>To get the diverging color scale right (centered at zero), find the largest absolute value in the new anomaly column (call it &ldquo;lim&rdquo;). Then use <code>limits = c(-lim, lim)</code> in your <code>scale_fill_</code> function.</li>
</ol>

	      </div>
      </div>
		</div>
    <footer class="footer">
  <div class="container">
	  <nav class="pull-left">
	    <ul>
	    
        

        <li>
          <a href="https://github.com/camposfa/ant-6973-spring-2019"><i class='fab fa-github fa-2x'></i> Github</a>
        </li>
        
      
        

        <li>
          <a href="https://serialmentor.com/dataviz/"><i class='material-icons'>book</i> Textbook: Wilke</a>
        </li>
        
      
        

        <li>
          <a href="https://socviz.co/"><i class='material-icons'>book</i> Textbook: Healy</a>
        </li>
        
      
        

        <li>
          <a href="https://moderndive.com"><i class='material-icons'>book</i> Textbook: ModernDive</a>
        </li>
        
      
        

        <li>
          <a href="http://r4ds.had.co.nz/"><i class='material-icons'>book</i> Textbook: R4DS</a>
        </li>
        
      
      </ul>
    </nav>
	  <div class="copyright pull-right">
	    <img src="../../img/cc-by.svg"/>
	  </div>
  </div>
</footer>
	</div>
</body>

   
  
  
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	
	
	
	
	<script src="../../js/material.min.js"></script>


	
	<script src="../../js/nouislider.min.js" type="text/javascript"></script>
	
	<script src="../../js/bootstrap-datepicker.js" type="text/javascript"></script>

	
	<script src="../../js/material-kit.js" type="text/javascript"></script>

   
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    <script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    
</html>
